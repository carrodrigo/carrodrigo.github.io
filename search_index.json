[["index.html", "Análisis de series de tiempo 1 Introducción 1.1 Conjunto de datos Online Retail II", " Análisis de series de tiempo Carlos Piñeros Maestría en Ciencia de Datos Pontificia Universidad Javeriana de Cali Fecha actualización:2025-05-24 1 Introducción El análisis de series de tiempo es una técnica estadística utilizada para analizar datos secuenciales en el tiempo. Estos datos pueden ser cualquier variable que se mida a lo largo del tiempo, como precios de acciones, ventas, temperatura, tráfico web, etc. El objetivo principal del análisis de series de tiempo es comprender y modelar las dependencias temporales en los datos para realizar pronósticos futuros, detectar anomalías o patrones, y evaluar el impacto de posibles intervenciones. El análisis de series de tiempo es una herramienta poderosa para entender la dinámica de los datos que evolucionan con el tiempo y para hacer predicciones informadas sobre el futuro. La elección de las técnicas y modelos específicos dependerá de las características particulares de la serie de tiempo que se esté analizando. 1.1 Conjunto de datos Online Retail II Este análisis emplea el conjunto de datos de Online Retail II del repositorio de aprendizaje automático de UCI(Chen 2012), que contiene dos años de datos de transacciones reales de una tienda en línea, con sede en el Reino Unido especializada en regalos únicos. El conjunto de datos comprende 1.067.371 instancias con varias características, como número de factura, código de stock, descripción del producto, cantidad, fecha y hora de la factura, precio unitario, ID de cliente y país. El conjunto de datos “Online Retail II” ofrece una base de datos sólida para aplicar técnicas de análisis de series de tiempo, gracias a su registro detallado de transacciones de comercio electrónico a lo largo de los dos años. Cada instancia registrada con la fecha y hora de la factura, ofrece una secuencia temporal que permite rastrear la evolución de las ventas, identificar patrones estacionales y detectar tendencias a largo plazo que permitan descubrir información valiosa para tomar decisiones más informadas, optimizar las operaciones y obtener una ventaja competitiva en el mercado del comercio electrónico. El conjunto de datos está licenciado bajo una licencia Creative Commons Attribution 4.0 International (CC BY 4.0). Esto permite compartir y adaptar los conjuntos de datos para cualquier propósito, siempre que se otorgue el crédito correspondiente. "],["visualización-de-la-serie-de-tiempo.html", "2 Visualización de la serie de tiempo 2.1 Serie de Tiempo de Ventas Totales 2.2 Comparación de Ventas por Año 2.3 Serie Temporal con Promedio Móvil 2.4 Gráfico de Rezagos 2.5 Análisis de la Estacionalidad Anual", " 2 Visualización de la serie de tiempo Las visualizaciones tienen como objetivo explorar y comunicar los patrones, tendencias y estacionalidad presentes en la serie de tiempo de ventas minoristas online. 2.1 Serie de Tiempo de Ventas Totales El siguiente gráfico proporciona una visión general de la tendencia de las ventas a lo largo de los dos años 2010-2011. La tendencia de ventas parece ser generalmente ascendente a lo largo del periodo analizado, aunque marcada por una alta volatilidad diaria y una posible estacionalidad hacia finales de año. Además, se observa una caída significativa a principios de 2011 que es un punto de interés para analizar. Durante la mayor parte de 2010, las ventas parecen fluctuar dentro de un rango relativamente estable, con algunos picos y valles, pero sin una dirección clara y marcada. Hacia el final de 2010 (octubre-diciembre), se aprecia un aumento en la frecuencia y la magnitud de los picos, lo que podría indicar una estacionalidad relacionada con las festividades de fin de año. Se observa una caída drástica en las ventas a principios de 2011, seguida de una recuperación gradual. Después de la caída inicial, las ventas en 2011 muestran una tendencia generalmente ascendente, con picos que parecen ser más altos que los observados en la mayor parte de 2010. Al igual que a finales de 2010, se observa un incremento significativo en las ventas hacia el final de 2011, culminando en el pico más alto del periodo. Esto refuerza la posible estacionalidad de fin de año. 2.2 Comparación de Ventas por Año El siguiente gráfico muestra la comparación del comportamiento de las ventas entre diferentes años, identificando patrones estacionales anuales y el rendimiento relativo de cada año. En general, para los dos años 2010 y 2011, parece haber una tendencia a tener ventas relativamente más bajas en los primeros meses del año (enero, febrero) y una recuperación gradual hacia la mitad del año. Parece haber una estacionalidad anual marcada, con los meses de septiembre, octubre y noviembre, siendo los más fuertes en ventas para 2010 y 2011. Esto podría estar relacionado con eventos de compras de temporada, como el regreso a clases o las preparaciones para las festividades de fin de año. Dentro de cada año, hay fluctuaciones considerables en las ventas de un mes a otro, lo que sugiere que factores específicos de cada mes (promociones, días festivos menores, etc.) podrían estar influyendo en el comportamiento del consumidor. 2.3 Serie Temporal con Promedio Móvil El gráfico permite visualizar la tendencia general de las ventas suavizada por los promedios móviles (7,30 y 90 días) y compararla con la serie original para identificar fluctuaciones y la dirección subyacente. A pesar de la volatilidad, Las tres líneas de promedio móvil (especialmente la de 90 días) indican una tendencia general ascendente en las ventas a lo largo de 2011, después de la caída observada a principios de ese año. Esto sugiere que, en promedio, las ventas tendieron a aumentar durante este tiempo. Después de la caída a principios de 2011, las ventas muestran una recuperación gradual según lo indican los promedios móviles. El SMA de 7 días es el primero en reaccionar a esta recuperación, seguido por el de 30 y luego el de 90 días. Hacia finales de 2011 (octubre-noviembre), los tres promedios móviles muestran un aumento significativo, lo que confirma la fuerte estacionalidad de fin de año que ya habíamos identificado. El SMA de 7 días alcanza el pico más alto, seguido por el de 30 y luego el de 90 días, lo que sugiere un aumento sostenido de las ventas durante este periodo. El promedio móvil confirma una tendencia general ascendente en las ventas durante el periodo analizado. La marcada subida del promedio móvil hacia finales de ambos años sugiere una fuerte estacionalidad relacionada con las festividades. 2.4 Gráfico de Rezagos Los gráficos de rezago de 1 y 7 días para los datos de ventas, permiten obtener información sobre cómo las ventas de un día están relacionadas con las ventas de días recientes y de la semana anterior, para identificar patrones de dependencia temporal en la serie de tiempo. el gráfico de rezago de 1 día sugiere una autocorrelación débil pero ligeramente positiva en las ventas diarias, con una tendencia a la persistencia en los periodos de baja actividad y una influencia significativa de otros factores además del día inmediatamente anterior. La mayoría de los puntos se concentran en la parte inferior izquierda del gráfico, lo que indica que los días con ventas bajas tienden a ser seguidos por días con ventas también bajas. Esto sugiere una cierta persistencia en los periodos de baja actividad. Hay una dispersión considerable de los puntos, lo que implica que no existe una relación lineal fuerte y directa entre las ventas de un día y las del día anterior para todos los niveles de ventas.Se observan algunos puntos aislados con ventas muy altas tanto en el día actual como en el día anterior, lo que corresponde a los picos de ventas que identificamos en la serie de tiempo. Al igual que en el gráfico de rezago de 1 día, en el gráfico de 7 días la mayoría de los puntos se concentran en la parte inferior izquierda, lo que sugiere que los días con ventas bajas tienden a ocurrir en los mismos días de la semana en semanas consecutivas. Esto podría indicar una actividad consistentemente baja en ciertos días de la semana. La dispersión de los puntos parece ser incluso mayor que en el gráfico de rezago de 1 día. Esto indica una relación aún más débil entre las ventas de un día y las de la misma semana anterior en todos los niveles de ventas. No se aprecia una tendencia lineal positiva o negativa discernible en la nube de puntos. La distribución parece más bien aleatoria, especialmente para los niveles de ventas más bajos y medios. El gráfico sugiere una autocorrelación semanal muy débil. Las ventas de un día específico de la semana no son un predictor confiable de las ventas del mismo día de la semana siguiente, excepto quizás en los extremos (días de muy baja o muy alta actividad). 2.5 Análisis de la Estacionalidad Anual El gráfico revela una fuerte estacionalidad anual en las ventas, con un pico pronunciado en otoño y una caída a principios de año. Si bien el patrón general se mantiene, hay variaciones en la magnitud y el comportamiento específico de las ventas entre los diferentes años, lo que sugiere la influencia de factores anuales subyacentes. La estacionalidad de fin de año es el patrón más consistente y pronunciado en las ventas. La debilidad en las ventas durante los primeros meses del año es también un patrón recurrente. Diciembre muestra un comportamiento diferente entre los años. En 2009, parece haber un descenso desde el pico de noviembre. En 2010, hay una ligera disminución desde el pico de noviembre, pero se mantiene en un nivel alto. En 2011, hay una caída drástica desde el pico de noviembre, aunque sigue siendo superior a los niveles de principios de año. "],["análisis-de-la-descomposición-de-ventas.html", "3 Análisis de la Descomposición de Ventas 3.1 Descomposición mensual de Ventas 3.2 Descomposición Semanal de Ventas Diarias", " 3 Análisis de la Descomposición de Ventas En esta sección, analizaremos la descomposición multiplicativa de la serie temporal de ventas en dos granularidades diferentes: mensual y semanal, para identificar tendencias a largo plazo y patrones de comportamiento dentro de la semana. 3.1 Descomposición mensual de Ventas Debido a la disponibilidad limitada de datos anuales (años 2009, 2010 y 2011), la aplicación de la descomposición STL para identificar una componente estacional interanual no proporcionó resultados concluyentes. Sin embargo, al observar la serie temporal de ventas mensuales, se puede apreciar una variabilidad considerable entre meses y años. Parece haber un pico significativo alrededor de finales de 2010 y otro, aunque quizás menos pronunciado, hacia finales de 2011. Esto podría indicar una fuerte estacionalidad relacionada con la temporada de fin de año como se ha mencionado anteriormente. La tendencia parece mostrar un aumento general desde principios de 2010 hasta mediados de 2011, con una posible disminución hacia el final del periodo 2011. En el Componente de Estacionalidad se observa un patrón cíclico claro con picos y valles que se repiten aproximadamente cada año. Existe una fuerte estacionalidad anual, con picos significativos hacia finales de año, probablemente impulsados por la temporada navideña, y valles en otros momentos. La componente aleatoria parece ser relativamente pequeña durante la mayor parte del periodo, con algunas variaciones modestas. Hacia el final del periodo, se observa un aumento en la componente aleatoria, lo que podría indicar eventos inesperados o una mayor imprevisibilidad en las ventas en esos momentos. Se realizó la prueba Aumentada de Dickey-Fuller (ADF) para evaluar la estacionariedad de la serie mensual. Los resultados fueron: ## Resultados de la Prueba ADF (Serie Mensual): ## ## Augmented Dickey-Fuller Test ## ## data: ts_ventas_mensuales ## Dickey-Fuller = -2.9601, Lag order = 2, p-value = 0.2066 ## alternative hypothesis: stationary Basándonos en los resultados de esta prueba ADF, la serie temporal de ventas mensuales original no parece ser estacionaria al nivel de significancia del 5%. Para intentar lograr la estacionariedad, se aplicó una primera diferenciación y una transformación logarítmica a la serie mensual, y se repitió la prueba ADF. ## ## Resultados de la Prueba ADF después de la primera diferenciación (Serie Mensual): ## ## Augmented Dickey-Fuller Test ## ## data: diff_ventas_mensual ## Dickey-Fuller = -2.987, Lag order = 2, p-value = 0.1964 ## alternative hypothesis: stationary ## ## Resultados de la Prueba ADF en la serie transformada logarítmicamente (Serie Mensual): ## ## Augmented Dickey-Fuller Test ## ## data: log_ventas_mensual ## Dickey-Fuller = -2.8767, Lag order = 2, p-value = 0.2384 ## alternative hypothesis: stationary ## ## Resultados de la Prueba ADF en la serie transformada logarítmicamente y diferenciada (Serie Mensual): ## ## Augmented Dickey-Fuller Test ## ## data: log_diff_ventas_mensual ## Dickey-Fuller = -2.7156, Lag order = 2, p-value = 0.2998 ## alternative hypothesis: stationary A pesar de aplicar la primera diferenciación y la transformación logarítmica (individualmente y en combinación), la prueba ADF indica que la serie temporal de ventas mensuales no es estacionaria al nivel de significancia del 5%. Estos resultados sugieren que la serie tiene características dependientes del tiempo que dificultan la predicción directa con modelos que asumen estacionariedad. 3.2 Descomposición Semanal de Ventas Diarias La descomposición multiplicativa de las ventas diarias con una periodicidad de 7 días reveló un patrón de estacionalidad semanal bien definido y consistente a lo largo del periodo analizado (enero de 2010 a finales de 2011). Se identificaron siete niveles distintos en el índice estacional, correspondientes a los siete días de la semana, lo que confirma una influencia semanal significativa en las ventas. El índice estacional fluctuó entre aproximadamente 0.9 y 1.06, indicando que algunos días de la semana consistentemente experimentan ventas por debajo del promedio semanal (índice &lt; 1), mientras que otros tienen ventas por encima del promedio (índice &gt; 1). La componente de tendencia mostró la dirección general de las ventas diarias, suavizando las fluctuaciones semanales y el ruido. La componente aleatoria (ruido) pareció ser relativamente pequeña, sugiriendo que la mayor parte de la variabilidad en las ventas diarias puede explicarse por la tendencia subyacente y el patrón estacional semanal. ## ## Resultados de la Prueba ADF (Serie Diaria): ## ## Augmented Dickey-Fuller Test ## ## data: ts_ventas_diarias ## Dickey-Fuller = -3.5173, Lag order = 8, p-value = 0.04064 ## alternative hypothesis: stationary ## ## Resultados de la Prueba ADF en la serie transformada logarítmicamente (Serie Diaria): ## ## Augmented Dickey-Fuller Test ## ## data: log_ventas_diarias ## Dickey-Fuller = -3.9215, Lag order = 8, p-value = 0.01292 ## alternative hypothesis: stationary La prueba ADF sugiere que la serie temporal de ventas diarias original es estacionaria al nivel de significancia del 5%. Dado que la serie diaria parece ser estacionaria (según la prueba ADF), esto simplifica el modelado. No sería estrictamente necesario aplicar diferenciación para lograr la estacionariedad. Sin embargo, la transformación logarítmica podría ser útil para estabilizar la varianza si se observa heterocedasticidad en los residuos del modelo. ## ## Resultados de la Prueba ADF en la serie transformada logarítmicamente (Serie Diaria): ## ## Augmented Dickey-Fuller Test ## ## data: log_ventas_diarias ## Dickey-Fuller = -3.9215, Lag order = 8, p-value = 0.01292 ## alternative hypothesis: stationary Como se confirmó con la prueba ADF, esta serie transformada logarítmicamente parece ser estacionaria. Esto significa que, en términos estadísticos, sus propiedades (media y varianza) no cambian significativamente con el tiempo, lo cual es favorable para el modelado. La serie de ventas mensuales presentó desafíos en cuanto a la estacionariedad, lo que podría requerir enfoques de modelado para series no estacionarias o una mayor exploración de transformaciones y diferenciaciones. La serie de ventas diarias, tanto en su forma original como transformada logarítmicamente, pareció ser estacionaria según la prueba ADF. Esto facilita el modelado de series temporales para la predicción a nivel diario, posiblemente utilizando modelos ARIMA o SARIMA para capturar la estacionalidad semanal observada en la descomposición. "],["modelado-con-holt-winters-y-suavizamiento-exponencial.html", "4 Modelado con Holt-Winters y Suavizamiento Exponencial 4.1 Metodología Holt-Winters 4.2 Metodologías de Suavizamiento Exponencial", " 4 Modelado con Holt-Winters y Suavizamiento Exponencial En esta sección, se aplican dos métodos clásicos de pronóstico de series temporales: el método de Holt-Winters, que es adecuado para series con tendencia y estacionalidad, y métodos de suavizamiento exponencial simple, doble y triple, a la serie temporal de ventas diarias transformada logarítmicamente, que demostró ser estacionaria. 4.1 Metodología Holt-Winters El método de Holt-Winters es una técnica de suavizamiento exponencial que extiende el suavizamiento exponencial simple para manejar series temporales tanto con tendencia como con estacionalidad. Existen dos variantes principales: la aditiva y la multiplicativa. Dado que en nuestro análisis de descomposición semanal observamos una estacionalidad que parecía interactuar multiplicativamente con el nivel de la serie, utilizaremos el método de Holt-Winters multiplicativo. Se cargó la serie temporal de ventas diarias transformada logarítmicamente (log_ventas_diarias) creada previamente. Esta serie está definida como un objeto de serie temporal con la frecuencia adecuada (7 para la estacionalidad semanal). Con la función HoltWinters() del paquete forecast en R se aplica el modelo, especificando que el método sea multiplicativo (seasonal = “multiplicative”). La función estimará los parámetros de nivel (α), tendencia (β) y estacionalidad (γ) que mejor se ajusten a los datos históricos. ## Holt-Winters exponential smoothing with trend and multiplicative seasonal component. ## ## Call: ## HoltWinters(x = log_ventas_diarias, seasonal = &quot;multiplicative&quot;) ## ## Smoothing parameters: ## alpha: 0.1170967 ## beta : 0.01453589 ## gamma: 0.1179584 ## ## Coefficients: ## [,1] ## a 11.32270402 ## b 0.00818538 ## s1 0.98320111 ## s2 0.97902019 ## s3 0.97421846 ## s4 0.98289768 ## s5 0.98724266 ## s6 0.98850538 ## s7 1.00602602 El resultado del modelo Holt-Winters proporciona información clave sobre cómo el algoritmo ha ajustado los datos históricos de las ventas diarias transformadas logarítmicamente: α (Alfa): Nivel. Valor (0.117) indica una adaptación gradual. β (Beta): Tendencia. El valor (0.015) sugiere una tendencia muy estable basado en la historia. γ (Gamma): Estacionalidad. El valor (0.118) indica una adaptación moderada a cambios estacionales. En general, los valores bajos de α y β sugieren que el modelo considera que el nivel y la tendencia subyacentes de las ventas (en escala logarítmica) son relativamente estables. El valor de γ indica una respuesta moderada a los cambios recientes en el patrón estacional semanal. los Índices Estacionales: s1 (primer día de la semana) está ligeramente por debajo del promedio (0.983). s2 y s3 también están ligeramente por debajo del promedio (0.979 y 0.974). s4 está ligeramente por debajo del promedio (0.983). s5 y s6 están ligeramente por encima del promedio (0.987 y 0.989). s7 (séptimo día de la semana) está ligeramente por encima del promedio (1.006). Esto sugiere un patrón semanal donde los días intermedios de la semana (s2, s3, s4) tienden a tener ventas ligeramente más bajas en relación con el promedio semanal, mientras que los últimos días de la semana (s5, s6, s7) tienden a tener ventas ligeramente más altas. El primer día de la semana (s1) también está ligeramente por debajo del promedio. 4.1.0.1 Análisis del Gráfico de Ajuste Holt-Winters: El gráfico interactivo presenta la evolución temporal del logaritmo de las ventas diarias (línea negra, “Datos Reales”) en comparación con los valores ajustados por el modelo Holt-Winters multiplicativo (línea roja, “Ajuste Holt-Winters”). Se observa que la línea roja (ajuste del modelo) sigue la trayectoria general de la línea negra (datos reales) a lo largo del tiempo. El modelo parece capturar la dirección principal de los cambios en las ventas, aunque con una suavización inherente a la técnica de suavizamiento exponencial. Aunque la línea roja suaviza las fluctuaciones diarias, se puede apreciar un patrón ondulante que sugiere que el modelo está intentando aprender y replicar la estacionalidad semanal presente en los datos. Existen periodos donde la distancia vertical entre la línea roja y la línea negra es mayor, lo que indica una mayor discrepancia entre la predicción del modelo y el valor real. Estos errores parecen ser más pronunciados durante los picos y valles agudos de la serie real, lo que es común en modelos de suavizamiento que tienden a “rezagarse” ante cambios bruscos. La línea roja es notablemente más suave que la línea negra, lo cual es una característica del suavizamiento exponencial. El modelo promedia las observaciones pasadas para hacer predicciones, lo que reduce la variabilidad del ajuste en comparación con los datos originales. El modelo Holt-Winters multiplicativo parece ofrecer un ajuste razonable a la serie temporal del logaritmo de las ventas diarias, capturando la tendencia general y la estacionalidad semanal subyacente. Sin embargo, debido a su naturaleza de suavizamiento, no replica perfectamente las fluctuaciones diarias y presenta errores, especialmente en los puntos de cambio rápido. 4.1.0.2 Pronóstico Holt-Winters (Log Ventas Diarias): La tabla presenta los pronósticos puntuales y los intervalos de confianza al 80% y 95% para los periodos futuros, basados en el modelo Holt-Winters multiplicativo aplicado al logaritmo de las ventas diarias. Los valores de tiempo en la primera columna indican los periodos de predicción secuenciales. Los pronósticos puntuales (columna “Point Forecast”) sugieren una continuidad del nivel de ventas (en escala logarítmica) observado al final de los datos históricos, manteniéndose alrededor de un valor de 11. Se aprecian ligeras fluctuaciones que insinúan la persistencia del patrón estacional semanal aprendido por el modelo, con días que se pronostican marginalmente por encima o por debajo de este nivel general. Los intervalos de confianza al 80% (“Lo 80” y “Hi 80”) y al 95% (“Lo 95” y “Hi 95”) proporcionan una medida de la incertidumbre asociada con las predicciones. La amplitud de estos intervalos tiende a aumentar a medida que se extiende el horizonte de predicción. Esto refleja la mayor dificultad para predecir con precisión valores más lejanos en el futuro. ## Point Forecast Lo 80 Hi 80 Lo 95 Hi 95 ## 87.28571 11.14054 10.9914753 11.28961 10.912564 11.36852 ## 87.42857 11.10118 10.9321452 11.27022 10.842662 11.35970 ## 87.57143 11.05471 10.8675272 11.24189 10.768438 11.34098 ## 87.71429 11.16124 10.9559064 11.36658 10.847209 11.47527 ## 87.85714 11.21866 10.9964561 11.44087 10.878828 11.55849 ## 88.00000 11.24110 11.0031165 11.47909 10.877135 11.60507 ## 88.14286 11.44858 -6.8738141 29.77097 -16.573102 39.47026 ## 88.28571 11.19688 1.5780371 20.81572 -3.513870 25.90763 ## 88.42857 11.15728 1.4418282 20.87273 -3.701221 26.01578 ## 88.57143 11.11053 1.3058871 20.91517 -3.884378 26.10544 ## 88.71429 11.21756 1.1875546 21.24756 -4.122009 26.55713 ## 88.85714 11.27523 1.0622489 21.48821 -4.344176 26.89463 ## 89.00000 11.29774 0.9328742 21.66261 -4.553955 27.14944 ## 89.14286 11.50622 -15.1124974 38.12494 -29.203596 52.21604 Al observar la secuencia de los pronósticos puntuales, se puede inferir la continuación del patrón estacional semanal. Sin embargo, debido a la naturaleza suavizada del modelo Holt-Winters, estas fluctuaciones son relativamente modestas en comparación con la variabilidad observada en los datos históricos. En resumen, el modelo Holt-Winters proyecta una estabilidad general en el nivel de las ventas diarias (en escala logarítmica) con una continuación del patrón estacional semanal. La incertidumbre de estas predicciones, tal como se refleja en la amplitud de los intervalos de confianza, aumenta con el horizonte de pronóstico. La transformación inversa es un paso esencial para interpretar estos resultados en el contexto real de las ventas. 4.1.0.3 Transformación Inversa Para obtener predicciones interpretables en la escala original de ventas, se debe aplicar la función exponencial (exp()) a todos los valores de esta tabla. Esta transformación inversa proporcionará las ventas pronosticadas en las unidades originales y los rangos de confianza correspondientes. ## Time Series: ## Start = c(87, 3) ## End = c(89, 2) ## Frequency = 7 ## [1] 68909.07 66249.50 63241.14 70350.21 74507.96 76198.84 93767.89 72902.50 ## [9] 70072.01 66871.67 74425.87 78844.11 80639.24 99331.77 ## NULL El método de Holt-Winters multiplicativo se eligió por su capacidad para modelar series temporales que exhiben tanto tendencia como estacionalidad, donde la magnitud de la estacionalidad varía proporcionalmente con el nivel de la serie. Nuestro análisis previo de la descomposición semanal sugirió la presencia de un patrón estacional semanal, lo que justifica el uso de una frecuencia de 7 en el modelo. La evaluación del ajuste del modelo a través de la visualización y el MSE nos permitirá determinar su idoneidad para la predicción. 4.2 Metodologías de Suavizamiento Exponencial Las metodologías de suavizamiento exponencial son una familia de métodos que pronostican basándose en promedios ponderados de observaciones pasadas, donde los pesos disminuyen exponencialmente a medida que las observaciones son más antiguas. 4.2.1 Suavizamiento Exponencial Simple (SES) Se aplicó la técnica de Suavizamiento Exponencial Simple (SES), implementada mediante el modelo ETS(A,N,N) (Error Aditivo, Ninguna Tendencia, Ninguna Estacionalidad), a la serie temporal del logaritmo de las ventas diarias. Este método es apropiado para series que no exhiben una tendencia clara ni patrones estacionales significativos. El gráfico resultante muestra la serie histórica de las ventas diarias transformadas logarítmicamente (línea negra) junto con el pronóstico generado por el modelo SES para los siguientes 14 periodos (línea azul horizontal), acompañado de sus respectivos intervalos de confianza (áreas sombreadas en gris). Debido a la naturaleza del SES, el pronóstico se presenta como una línea horizontal que representa el nivel suavizado de la serie al final del periodo de observación. La expansión de los intervalos de confianza a medida que el horizonte de pronóstico se extiende refleja la creciente incertidumbre inherente a las predicciones a largo plazo. ## ETS(A,N,N) ## ## Call: ## ets(y = log_ventas_diarias, model = &quot;ANN&quot;) ## ## Smoothing parameters: ## alpha = 0.1136 ## ## Initial states: ## l = 10.5423 ## ## sigma: 0.4949 ## ## AIC AICc BIC ## 3021.938 3021.978 3035.148 La salida del modelo ETS(A,N,N) revela un parámetro de suavizamiento del nivel (α) de 0.1136. Este valor relativamente bajo indica que el modelo otorga mayor peso a las observaciones pasadas y reacciona de manera gradual a los cambios recientes en el nivel de la serie, lo que resulta en un suavizamiento considerable de las fluctuaciones. La desviación estándar de los residuos (sigma) del modelo es de 0.4949, lo que proporciona una medida de la magnitud de los errores de predicción. En resumen, el modelo de Suavizamiento Exponencial Simple proporciona un pronóstico estable basado en el nivel promedio suavizado de la serie histórica del logaritmo de las ventas diarias, asumiendo la ausencia de tendencia y estacionalidad. 4.2.2 Suavizamiento Exponencial Doble (Holt) Para tener en cuenta la posible presencia de una tendencia en la serie temporal del logaritmo de las ventas diarias, se aplicó el método de Suavizamiento Exponencial Doble, utilizando la implementación del modelo ETS(A,Ad,N) (Error Aditivo, Tendencia Aditiva Amortiguada, Ninguna Estacionalidad) a través de la función ets() en R. Aunque se solicitó un modelo con tendencia aditiva no amortiguada (“AAN”), la función ets() identificó automáticamente que un modelo con tendencia aditiva amortiguada (“AAd”) era más apropiado para los datos. El gráfico resultante muestra la serie histórica de las ventas diarias transformadas logarítmicamente (línea negra) junto con el pronóstico para los siguientes 14 periodos (línea azul). A diferencia del pronóstico horizontal obtenido con el Suavizamiento Exponencial Simple, el pronóstico del modelo Holt exhibe una ligera pendiente descendente, lo que sugiere que el modelo ha detectado y proyecta una pequeña tendencia a la baja en el logaritmo de las ventas. ## ETS(A,Ad,N) ## ## Call: ## ets(y = log_ventas_diarias, model = &quot;AAN&quot;) ## ## Smoothing parameters: ## alpha = 0.1074 ## beta = 1e-04 ## phi = 0.857 ## ## Initial states: ## l = 11.1657 ## b = -0.1747 ## ## sigma: 0.4947 ## ## AIC AICc BIC ## 3024.472 3024.613 3050.894 En resumen, el modelo de Suavizamiento Exponencial Doble (con amortiguamiento de la tendencia) proporciona un pronóstico que considera una ligera tendencia a la baja en el logaritmo de las ventas diarias. La amortiguación de la tendencia sugiere que esta influencia disminuirá con el tiempo. 4.2.3 Suavizamiento Exponencial Triple: Se aplicó el método de Suavizamiento Exponencial Triple o de Holt-Winters con un modelo ETS(M,Ad,M) (Error Multiplicativo, Tendencia Aditiva Amortiguada, Estacionalidad Multiplicativa) para pronosticar el logaritmo de las ventas diarias, buscando capturar tanto la tendencia como la estacionalidad multiplicativa inherentes a la serie. El gráfico resultante muestra la serie histórica junto con un pronóstico que exhibe un patrón repetitivo a lo largo del tiempo, reflejando la influencia de la estacionalidad semanal. La tendencia proyectada se muestra ligeramente amortiguada, lo que sugiere que su impacto se reduce en el horizonte futuro. Los intervalos de confianza, como en los modelos anteriores, se expanden con el tiempo, indicando una mayor incertidumbre en las predicciones a largo plazo. ## ETS(M,Ad,M) ## ## Call: ## ets(y = log_ventas_diarias, model = &quot;MAM&quot;) ## ## Smoothing parameters: ## alpha = 0.1168 ## beta = 1e-04 ## gamma = 1e-04 ## phi = 0.98 ## ## Initial states: ## l = 10.5018 ## b = -0.015 ## s = 1.0018 1.005 0.9891 1.0026 0.9985 1.0048 ## 0.9982 ## ## sigma: 0.0481 ## ## AIC AICc BIC ## 3031.649 3032.266 3088.895 Los parámetros de suavizamiento estimados para el nivel (α), la tendencia (β) y la estacionalidad (γ) fueron relativamente bajos, lo que implica una respuesta gradual del modelo a las nuevas observaciones. El parámetro de amortiguamiento de la tendencia (ϕ) fue cercano a 1, indicando una amortiguación suave de la tendencia. Aunque la desviación estándar de los residuos (sigma) fue la más baja de los modelos analizados, sugiriendo un mejor ajuste a la variabilidad de los datos, los criterios de información (AIC, AICc, BIC) fueron los más altos. Esto podría indicar que la complejidad adicional del modelo Holt-Winters, al intentar modelar la estacionalidad, no se tradujo en una mejora sustancial en el ajuste general según estas métricas, en comparación con los modelos más simples. En conclusión, el modelo de Suavizamiento Exponencial Triple proporciona un pronóstico que considera tanto la posible tendencia subyacente como el patrón estacional semanal en el logaritmo de las ventas diarias. 4.2.4 Evaluación y Comparación Para evaluar la capacidad de ajuste de los diferentes modelos de suavizamiento exponencial aplicados a la serie temporal del logaritmo de las ventas diarias, se calcularon diversas métricas de precisión sobre el conjunto de entrenamiento. Los resultados obtenidos para el Suavizamiento Exponencial Simple (SES), el Suavizamiento Exponencial Doble (Holt), el Suavizamiento Exponencial con Tendencia y Estacionalidad (Holt-Winters Multiplicativo, ajustado con ets()), y el Suavizamiento Exponencial con Tendencia y Estacionalidad (Holt-Winters Multiplicativo, ajustado con HoltWinters()) se presentan a continuación. ## ME RMSE MAE MPE MAPE MASE ## Training set 0.008208713 0.4940344 0.3621199 -0.1515115 3.579648 0.6848008 ## ACF1 ## Training set 0.06622899 ## ME RMSE MAE MPE MAPE MASE ## Training set 0.0149586 0.4926192 0.3618002 -0.08541534 3.573554 0.6841963 ## ACF1 ## Training set 0.06642588 ## ME RMSE MAE MPE MAPE MASE ## Training set 0.01851021 0.4902117 0.3602653 -0.04649133 3.556878 0.6812937 ## ACF1 ## Training set 0.06833967 ## ME RMSE MAE MPE MAPE MASE ## Training set -0.01523565 0.52553 0.3846537 -0.3718733 3.80998 0.7274143 ## ACF1 ## Training set 0.07317643 Los modelos de Suavizamiento Exponencial ajustados con la función ets() mostraron una precisión de ajuste similar en los datos de entrenamiento del logaritmo de las ventas diarias, con errores promedio (RMSE y MAE) y errores porcentuales (MAPE) muy cercanos. El modelo Holt-Winters (ets(M,Ad,M)) tuvo marginalmente los errores más bajos. En contraste, el modelo Holt-Winters ajustado con la función base HoltWinters() presentó un ajuste ligeramente inferior. La baja autocorrelación de los residuos en todos los modelos indica una buena captura de la dependencia temporal. En general, los modelos ets() proporcionaron un rendimiento comparable, con una ligera ventaja para el modelo que considera estacionalidad, y superaron al modelo HoltWinters() base. "],["metodología-box-jenkins-y-modelos-arima.html", "5 Metodología Box-Jenkins y Modelos ARIMA 5.1 Identificación del Modelo ARIMA 5.2 Gráficos ACF y PACF 5.3 Estimación del Modelo ARMA", " 5 Metodología Box-Jenkins y Modelos ARIMA La metodología Box-Jenkins es un enfoque iterativo para la identificación, estimación y verificación de modelos ARIMA. Estos modelos son capaces de capturar tanto la dependencia de la serie con sus propios valores pasados (componente autorregresivo - AR) como la dependencia con los errores de pronóstico pasados (componente de media móvil - MA). La parte “Integrada” (I) del modelo se refiere a la necesidad de diferenciar la serie para hacerla estacionaria antes de aplicar los componentes AR y MA. 5.1 Identificación del Modelo ARIMA El primer paso en la metodología Box-Jenkins es identificar el orden tentativo del modelo ARIMA (p, d, q), donde: p: es el orden del componente autorregresivo (AR). d: es el número de veces que la serie necesita ser diferenciada para alcanzar la estacionariedad. q: es el orden del componente de media móvil (MA). La identificación del orden del modelo se basa principalmente en el análisis de los gráficos de Autocorrelación (ACF) y Autocorrelación Parcial (PACF) de la serie estacionaria o de la serie diferenciada según el caso. 5.2 Gráficos ACF y PACF Para identificar los posibles órdenes de los componentes Autorregresivo (AR) y de Media Móvil (MA) para nuestro modelo ARIMA, analizamos las funciones de autocorrelación (ACF) y autocorrelación parcial (PACF) de la serie de ventas diarias transformada logarítmicamente (log_ventas_diarias). El gráfico ACF (hasta lag 21) reveló picos positivos en los lags 7 y 14, aunque estos fueron solo ligeramente superiores al límite de significancia. Esto sugiere una posible correlación de las ventas diarias con los valores de hace una y dos semanas. Sin embargo, el decaimiento en estos lags no fue particularmente pronunciado. Por otro lado, el gráfico PACF (hasta lag 21) no mostró picos claramente significativos en los lags correspondientes a la frecuencia semanal (7, 14, 21). Los picos en estos lags se mantuvieron dentro de los límites de significancia estadística. Basándonos en este análisis inicial de los gráficos ACF y PACF y en que la serie estacionaria log_ventas_diarias ya es estacionaria,los modelos ARIMA tentativos que exploraremos son en realidad modelos ARMA: ARMA(2, 0): Un modelo Autorregresivo de orden 2. ARMA(0, 2): Un modelo de Media Móvil de orden 2. ARMA(2, 2): Un modelo mixto con componentes AR de orden 2 y MA de orden 2. 5.3 Estimación del Modelo ARMA Se estimaron tres modelos ARMA diferentes para la serie estacionaria de ventas diarias transformada logarítmicamente (log_ventas_diarias): Modelo ARMA(2, 0): Los coeficientes estimados para ar1 (0.3115) y ar2 (0.1149) fueron estadísticamente significativos, dado que sus errores estándar (0.0407 y 0.0408 respectivamente) son relativamente pequeños. El intercepto también fue significativo (10.3061 con un error estándar de 0.0369). El modelo arrojó un valor de AIC de 935.94 y una log-verosimilitud de -463.97. Modelo ARMA(0, 2): Los coeficientes estimados para ma1 (0.3137) y ma2 (0.0546) parecen ser significativos, aunque el coeficiente ma2 tiene un error estándar (0.0379) relativamente mayor, lo que sugiere una significancia marginal. El intercepto fue significativo (10.3037 con un error estándar de 0.0295). Este modelo tuvo un AIC de 953.62 y una log-verosimilitud de -472.81. Modelo ARMA(2, 2): Todos los coeficientes estimados (ar1 = 0.5188, ar2 = 0.4585, ma1 = -0.2976, ma2 = -0.5230, intercepto = 10.3827) fueron estadísticamente significativos en relación con sus errores estándar. Este modelo presentó el valor de AIC más bajo de los tres, con 861.37, y la log-verosimilitud más alta, con -424.68. ## ## Call: ## arima(x = log_ventas_diarias, order = c(2, 0, 0)) ## ## Coefficients: ## ar1 ar2 intercept ## 0.3115 0.1149 10.3061 ## s.e. 0.0407 0.0408 0.0369 ## ## sigma^2 estimated as 0.272: log likelihood = -463.97, aic = 935.94 ## ## Call: ## arima(x = log_ventas_diarias, order = c(0, 0, 2)) ## ## Coefficients: ## ma1 ma2 intercept ## 0.3137 0.0546 10.3037 ## s.e. 0.0432 0.0379 0.0295 ## ## sigma^2 estimated as 0.2801: log likelihood = -472.81, aic = 953.62 ## ## Call: ## arima(x = log_ventas_diarias, order = c(2, 0, 2)) ## ## Coefficients: ## ar1 ar2 ma1 ma2 intercept ## 0.5188 0.4585 -0.2976 -0.5230 10.3827 ## s.e. 0.1187 0.1160 0.1075 0.0905 0.1507 ## ## sigma^2 estimated as 0.2385: log likelihood = -424.68, aic = 861.37 Al comparar los tres modelos ARMA basados en el Criterio de Información de Akaike (AIC), el modelo ARMA(2, 2) parece ofrecer el mejor equilibrio entre el ajuste a los datos y la complejidad del modelo, ya que exhibió el valor de AIC más bajo. La mayor log-verosimilitud para este modelo también respalda un mejor ajuste. 5.3.1 Verificación del Modelo ARMA La verificación del modelo ajustado implica examinar los residuos del modelo para asegurar que se comportan como ruido blanco (es decir, que son aleatorios, tienen media cero y no están autocorrelacionados). Gráficos de los Residuos: Visualizar los residuos a lo largo del tiempo para buscar patrones no aleatorios o cambios en la varianza. Gráfico ACF de los Residuos: El ACF de los residuos no debería mostrar autocorrelaciones significativas en ningún lag. Si las hay, sugiere que el modelo no ha capturado toda la dependencia en la serie. Prueba de Ljung-Box: Esta es una prueba formal de la hipótesis nula de que las autocorrelaciones de los residuos hasta un cierto lag son todas cero. Un p-valor alto sugiere que no hay autocorrelación significativa. ## ## Box-Ljung test ## ## data: residuos_arma_2_2 ## X-squared = 276.73, df = 20, p-value &lt; 2.2e-16 los residuos parecen mostrar un comportamiento más o menos aleatorio alrededor de cero. No se observan tendencias claras o patrones estacionales evidentes. La presencia de autocorrelaciones significativas en los residuos del gráfico ACF, especialmente en los lags 1, 2 y posiblemente 3, sugiere que el modelo ARMA(2, 2) no ha capturado completamente la estructura dependiente del tiempo en la serie log_ventas_diarias. Esto indica que los residuos no se comportan como ruido blanco, y por lo tanto, el modelo podría no ser el más adecuado. Dado que el p-valor de de la Prueba de Ljung-Boxes muy bajo, rechazamos la hipótesis nula de que los residuos hasta el lag 20 son independientes (no autocorrelacionados). Esto confirma formalmente lo que ya habíamos observado en el gráfico ACF de los residuos: existe una autocorrelación significativa en los residuos del modelo ARMA(2, 2). Dado que el ARMA(2, 2) no pasó la prueba de los residuos, podríamos probar los siguientes: ARMA(2, 1): AR orden 2, MA orden 1. (Considerando que el PACF corta después del lag 2 y el ACF decae). ARMA(1, 2): AR orden 1, MA orden 2. (Considerando que el ACF corta después del lag 2 y el PACF decae). ## ## Call: ## arima(x = log_ventas_diarias, order = c(2, 0, 1)) ## ## Coefficients: ## ar1 ar2 ma1 intercept ## 1.0632 -0.0775 -0.8879 10.3813 ## s.e. 0.0481 0.0454 0.0245 0.1502 ## ## sigma^2 estimated as 0.2417: log likelihood = -428.66, aic = 867.32 ## ## Call: ## arima(x = log_ventas_diarias, order = c(1, 0, 2)) ## ## Coefficients: ## ar1 ma1 ma2 intercept ## 0.9849 -0.7875 -0.0926 10.3816 ## s.e. 0.0097 0.0474 0.0470 0.1515 ## ## sigma^2 estimated as 0.2413: log likelihood = -428.16, aic = 866.32 Al comparar los valores de AIC, observamos que: ARMA(2, 2) tiene el AIC más bajo (861.37). ARMA(1, 2) tiene un AIC de 866.32. ARMA(2, 1) tiene un AIC de 867.32. Los valores de log-likelihood también son ligeramente más altos (menos negativos) para el ARMA(2, 2). ## ## Box-Ljung test ## ## data: residuos_arma_1_2 ## X-squared = 313.66, df = 20, p-value &lt; 2.2e-16 ## ## Box-Ljung test ## ## data: residuos_arma_2_1 ## X-squared = 315.1, df = 20, p-value &lt; 2.2e-16 El modelo ARMA(2, 2) sigue siendo el preferido entre los tres que hemos estimado hasta ahora, aunque los modelos ARMA(1, 2) y ARMA(2, 1) tienen valores de AIC bastante cercanos. Basándonos en el análisis previo del ACF y PACF, donde vimos cierta significancia hasta el lag 2 o 3, intentamos un ARMA(3, 2) ## ## Call: ## arima(x = log_ventas_diarias, order = c(3, 0, 2)) ## ## Coefficients: ## ar1 ar2 ar3 ma1 ma2 intercept ## 0.6037 0.2614 0.1074 -0.4105 -0.3865 10.3770 ## s.e. 0.1281 0.1443 0.0493 0.1241 0.1115 0.1418 ## ## sigma^2 estimated as 0.2369: log likelihood = -422.57, aic = 859.14 ## ## Box-Ljung test ## ## data: residuos_arma_3_2 ## X-squared = 245.54, df = 20, p-value &lt; 2.2e-16 Al igual que con los modelos anteriores, el p-valor es extremadamente bajo (menor que 2.2e-16), lo que es significativamente menor que cualquier nivel de significancia comúnmente utilizado (por ejemplo, 0.05). Para el modelo ARMA(3, 2), rechazamos nuevamente la hipótesis nula de que los residuos hasta el lag 20 son independientes (no autocorrelacionados). Esto indica que, a pesar de aumentar el orden del modelo, todavía existe una autocorrelación significativa en los residuos. A continuación, vamos a estimar un modelo SARIMA con un componente estacional simple y un periodo de 7 (para la posible estacionalidad semanal). Utilizaremos los órdenes p=2 y q=2 que nos dieron el mejor AIC en los modelos ARMA. Dado que nuestra serie (log_ventas_diarias) ya es estacionaria (d=0), también usaremos D=0 para el componente estacional. ## Series: log_ventas_diarias ## ARIMA(3,0,2)(0,0,2)[7] with non-zero mean ## ## Coefficients: ## ar1 ar2 ar3 ma1 ma2 sma1 sma2 mean ## 0.6120 0.2804 0.0889 -0.4167 -0.3676 -0.0950 -0.1381 10.3957 ## s.e. 0.1738 0.1932 0.0502 0.1715 0.1507 0.0431 0.0439 0.1646 ## ## sigma^2 = 0.2341: log likelihood = -415.22 ## AIC=848.44 AICc=848.74 BIC=888.07 ## Series: log_ventas_diarias ## ARIMA(2,0,3)(0,0,2)[7] with non-zero mean ## ## Coefficients: ## ar1 ar2 ma1 ma2 ma3 sma1 sma2 mean ## 1.3191 -0.3309 -1.1267 0.0823 0.1660 -0.1354 -0.1304 10.3786 ## s.e. 0.2007 0.1982 0.2005 0.1865 0.0469 0.0471 0.0452 0.1444 ## ## sigma^2 = 0.233: log likelihood = -413.72 ## AIC=845.43 AICc=845.73 BIC=885.06 ## Series: log_ventas_diarias ## ARIMA(2,0,2)(1,0,1)[7] with non-zero mean ## ## Coefficients: ## ar1 ar2 ma1 ma2 sar1 sma1 mean ## 0.4894 0.4924 -0.2525 -0.5377 0.3921 -0.5283 10.3983 ## s.e. 0.1315 0.1295 0.1198 0.0986 0.1461 0.1333 0.1681 ## ## sigma^2 = 0.2368: log likelihood = -419.11 ## AIC=854.23 AICc=854.47 BIC=889.45 ## ## Box-Ljung test ## ## data: residuos_sarima_302_002s7 ## X-squared = 211.09, df = 20, p-value &lt; 2.2e-16 ## ## Box-Ljung test ## ## data: residuos_sarima_203_002s7 ## X-squared = 195.23, df = 20, p-value &lt; 2.2e-16 ## ## Box-Ljung test ## ## data: residuos_sarima_202_101s7 ## X-squared = 243, df = 20, p-value &lt; 2.2e-16 Para los tres modelos SARIMA que probamos con órdenes ligeramente diferentes, rechazamos la hipótesis nula de que los residuos hasta el lag 20 son independientes (no autocorrelacionados). Esto indica que, a pesar de ajustar los órdenes de los componentes AR, MA y estacionales, todavía persiste una autocorrelación significativa en los residuos de estos modelos. Por ultimo, la función auto.arima() puede ser una forma eficiente de explorar una amplia gama de posibles modelos y seleccionar el que mejor se ajuste a los datos según criterios de información como el AIC o BIC. ## Aplicando auto.arima() a la serie de tiempo &#39;log_ventas_diarias&#39;... ## ## ARIMA(2,1,2)(1,0,1)[7] with drift : 853.5256 ## ARIMA(0,1,0) with drift : 1171.008 ## ARIMA(1,1,0)(1,0,0)[7] with drift : 1059.165 ## ARIMA(0,1,1)(0,0,1)[7] with drift : 866.5916 ## ARIMA(0,1,0) : 1169.002 ## ARIMA(2,1,2)(0,0,1)[7] with drift : 856.7155 ## ARIMA(2,1,2)(1,0,0)[7] with drift : 858.24 ## ARIMA(2,1,2)(2,0,1)[7] with drift : 851.391 ## ARIMA(2,1,2)(2,0,0)[7] with drift : 849.6483 ## ARIMA(1,1,2)(2,0,0)[7] with drift : 849.7743 ## ARIMA(2,1,1)(2,0,0)[7] with drift : 848.7014 ## ARIMA(2,1,1)(1,0,0)[7] with drift : 859.2173 ## ARIMA(2,1,1)(2,0,1)[7] with drift : 849.7371 ## ARIMA(2,1,1)(1,0,1)[7] with drift : 853.6713 ## ARIMA(1,1,1)(2,0,0)[7] with drift : 852.998 ## ARIMA(2,1,0)(2,0,0)[7] with drift : 955.9923 ## ARIMA(3,1,1)(2,0,0)[7] with drift : 850.528 ## ARIMA(1,1,0)(2,0,0)[7] with drift : 1037.373 ## ARIMA(3,1,0)(2,0,0)[7] with drift : 947.3315 ## ARIMA(3,1,2)(2,0,0)[7] with drift : 851.7058 ## ARIMA(2,1,1)(2,0,0)[7] : 846.8599 ## ARIMA(2,1,1)(1,0,0)[7] : 857.3269 ## ARIMA(2,1,1)(2,0,1)[7] : 847.8734 ## ARIMA(2,1,1)(1,0,1)[7] : 851.8313 ## ARIMA(1,1,1)(2,0,0)[7] : 851.2021 ## ARIMA(2,1,0)(2,0,0)[7] : 953.9674 ## ARIMA(3,1,1)(2,0,0)[7] : 848.6748 ## ARIMA(2,1,2)(2,0,0)[7] : 847.8073 ## ARIMA(1,1,0)(2,0,0)[7] : 1035.352 ## ARIMA(1,1,2)(2,0,0)[7] : 847.9652 ## ARIMA(3,1,0)(2,0,0)[7] : 945.3024 ## ARIMA(3,1,2)(2,0,0)[7] : Inf ## ## Best model: ARIMA(2,1,1)(2,0,0)[7] ## ## --- Resumen del Modelo Seleccionado por auto.arima() --- ## Series: log_ventas_diarias ## ARIMA(2,1,1)(2,0,0)[7] ## ## Coefficients: ## ar1 ar2 ma1 sar1 sar2 ## 0.0589 -0.1163 -0.8532 -0.1155 -0.1489 ## s.e. 0.0479 0.0457 0.0262 0.0429 0.0418 ## ## sigma^2 = 0.2349: log likelihood = -417.36 ## AIC=846.72 AICc=846.86 BIC=873.13 ## Series: log_ventas_diarias ## ARIMA(2,1,1)(2,0,0)[7] ## ## Coefficients: ## ar1 ar2 ma1 sar1 sar2 ## 0.0589 -0.1163 -0.8532 -0.1155 -0.1489 ## s.e. 0.0479 0.0457 0.0262 0.0429 0.0418 ## ## sigma^2 = 0.2349: log likelihood = -417.36 ## AIC=846.72 AICc=846.86 BIC=873.13 ## ## Training set error measures: ## ME RMSE MAE MPE MAPE MASE ## Training set 0.005532555 0.4822967 0.3549085 -0.1668849 3.508473 0.6711635 ## ACF1 ## Training set -0.00123758 ## ## --- Diagnóstico de Residuos --- ## ## Ljung-Box test ## ## data: Residuals from ARIMA(2,1,1)(2,0,0)[7] ## Q* = 168.95, df = 9, p-value &lt; 2.2e-16 ## ## Model df: 5. Total lags used: 14 La función auto.arima() ha identificado un modelo SARIMA(2,1,1)(2,0,0)[7] como el que mejor se ajusta a los datos log_ventas_diarias según el criterio AICc. Es importante notar que incluyó una diferenciación de orden 1 (I=1) en la parte no estacional, a diferencia de los modelos que probamos manualmente donde asumimos estacionariedad (d=0). Esto sugiere que, aunque la prueba ADF en la serie logarítmica dio un p-valor significativo, auto.arima() encontró que una diferenciación podría mejorar el modelo. El resultado de la prueba de Ljung-Box para los residuos de este modelo seleccionado automáticamente es altamente significativo (p-value &lt; 2.2e-16). Esto significa que rechazamos la hipótesis nula de que los residuos son independientes. Por lo tanto, todavía existe una autocorrelación significativa en los residuos del modelo seleccionado por auto.arima(). 5.3.2 Pronóstico con el Modelo ARIMA Seleccionado A pesar de que auto.arima() seleccionó un modelo con un AIC más bajo que muchos de los que probamos manualmente, la persistente autocorrelación significativa en los residuos indica que este modelo aún no es adecuado para pronosticar, ya que no ha capturado toda la información relevante de la serie de tiempo. ## Point Forecast Lo 80 Hi 80 Lo 95 Hi 95 ## 87.28571 11.20393 10.58274 11.82511 10.253911 12.15394 ## 87.42857 11.13458 10.50040 11.76876 10.164685 12.10448 ## 87.57143 11.23463 10.59990 11.86936 10.263894 12.20537 ## 87.71429 11.16065 10.52116 11.80014 10.182638 12.13867 ## 87.85714 11.08042 10.43425 11.72659 10.092188 12.06865 ## 88.00000 11.09442 10.44234 11.74650 10.097155 12.09169 ## 88.14286 11.01379 10.35613 11.67146 10.007983 12.01960 ## 88.28571 11.11576 10.45794 11.77357 10.109708 12.12180 ## 88.42857 11.25042 10.58872 11.91212 10.238443 12.26240 ## 88.57143 11.04783 10.38092 11.71474 10.027886 12.06777 ## 88.71429 11.12307 10.45171 11.79443 10.096314 12.14983 ## 88.85714 11.08985 10.41426 11.76544 10.056618 12.12308 ## 89.00000 11.07491 10.39505 11.75478 10.035148 12.11468 ## 89.14286 10.95162 10.26748 11.63576 9.905323 11.99792 Aunque podemos observar visualmente el patrón general del pronóstico generado por el modelo ARIMA(2,1,1)(2,0,0)[7], no debemos confiar en su precisión debido a los problemas con los residuos. Este gráfico es más ilustrativo de lo que el modelo intentó predecir, en lugar de una predicción confiable de las ventas futuras. Se recomienda considerar otros enfoques de modelado de series de tiempo como los modelos de Regresión con Componentes de Serie de Tiempo. "],["modelo-prophet.html", "6 Modelo Prophet 6.1 Preparación y Exploración de la Serie de Tiempo 6.2 Modelado con Prophet 6.3 Evaluación del Modelo 6.4 Visualización del Pronóstico 6.5 Conclusiones", " 6 Modelo Prophet En respuesta a la creciente necesidad de pronósticos fiables y automatizados, el equipo de Core Data Science de Facebook desarrolló Prophet. Este modelo fue diseñado para ser accesible a usuarios que no son expertos en series de tiempo, ofreciendo una solución robusta y flexible que maneja características comunes de las series de tiempo, como: Tendencias no lineales: Prophet puede modelar cambios en la dirección del crecimiento de la serie a lo largo del tiempo, con la capacidad de detectar y ajustarse automáticamente a puntos de cambio significativos (changepoints). Estacionalidad múltiple: Permite la inclusión de patrones estacionales complejos (ej. diarios, semanales, anuales) sin requerir una especificación manual detallada de sus órdenes. Días festivos y eventos especiales: Facilita la incorporación de eventos discretos y recurrentes (días festivos, promociones, etc.) que impactan la serie de tiempo. Manejo de datos faltantes y atípicos: Es inherentemente robusto a los datos faltantes y a los valores extremos (outliers). La flexibilidad de Prophet radica en su enfoque de descomposición de la serie de tiempo en componentes aditivos: tendencia, estacionalidad y efectos de días festivos. Su implementación intuitiva y su capacidad para generar pronósticos con intervalos de incertidumbre lo convierten en una herramienta potente y práctica para una amplia gama de aplicaciones de pronóstico. 6.1 Preparación y Exploración de la Serie de Tiempo La serie de tiempo de ventas diarias abarca un total de 604 días, desde el 1 de diciembre de 2009 hasta el 9 de diciembre de 2011. Para estabilizar la varianza y mejorar el rendimiento del modelo, se aplicó una transformación logarítmica a la columna de ventas (TotalSales), resultando en la variable objetivo Log(Ventas). El análisis exploratorio de la serie transformada logarítmicamente en una sección anterior, reveló la presencia de una tendencia subyacente y una marcada estacionalidad. La Función de Autocorrelación (ACF) y la Función de Autocorrelación Parcial (PACF) confirmaron una fuerte dependencia a largo plazo y patrones estacionales significativos en rangos de 7 días, indicando una clara estacionalidad semanal. 6.2 Modelado con Prophet El modelo se configuró para incluir estacionalidad semanal y anual, y se ajustó el número de puntos de cambio de tendencia a 10 (n.changepoints = 10) para un mejor control de la flexibilidad de la tendencia. El análisis de las componentes del modelo Prophet reveló: Tendencia (Trend): El modelo identificó una tendencia no lineal con puntos de cambio significativos, adaptándose a los cambios en la dinámica de las ventas a lo largo del tiempo. Estacionalidad Semanal (Weekly Seasonality): Se observó un patrón semanal claro, donde los sábados muestran una disminución notable en las ventas. Estacionalidad Anual (Yearly Seasonality): El modelo también capturó patrones anuales, con fluctuaciones que sugieren un impacto de periodos específicos del año (ej. incrementos hacia finales de año y caídas a principios de enero). ## Estructura del dataframe preparado para Prophet: ## tibble [604 × 2] (S3: tbl_df/tbl/data.frame) ## $ ds: Date[1:604], format: &quot;2009-12-01&quot; &quot;2009-12-02&quot; ... ## $ y : num [1:604] 10.91 11.06 11.21 10.61 9.19 ... ## NULL 6.3 Evaluación del Modelo Para evaluar el rendimiento predictivo del modelo Prophet, se implementó una estrategia de validación en la que los datos se dividieron en un conjunto de entrenamiento (544 días) y un conjunto de prueba (los últimos 60 días de la serie). El modelo se ajustó con el conjunto de entrenamiento y se generaron pronósticos para el conjunto de prueba. La visualización del pronóstico del modelo Prophet en el conjunto de prueba, en la escala logarítmica, compara los valores reales de las ventas transformadas logarítmicamente (Log(Ventas)) con las predicciones generadas por el modelo, incluyendo sus intervalos de confianza. ## ## Longitud del conjunto de entrenamiento: 544 días ## Longitud del conjunto de prueba: 60 días ## ## Métricas de rendimiento en el conjunto de prueba (escala logarítmica): ## RMSE (Raíz del Error Cuadrático Medio): 0.3739 ## MAE (Error Absoluto Medio): 0.2798 La línea de pronóstico (roja discontinua) sigue fielmente las fluctuaciones de la línea de datos reales (gris sólida), que exhibe picos y valles consistentes a lo largo de cada semana. Esto valida la efectividad del modelo en la identificación y proyección de la estacionalidad semanal previamente analizada, donde los sábados mostraban una marcada disminución en las ventas. Hacia el final del conjunto de prueba, específicamente a principios de diciembre, se observa un pico considerable en los datos reales (línea gris) que el pronóstico no logra replicar en su totalidad, lo que sugiere la presencia de un evento atípico o un cambio abrupto en la dinámica de las ventas que no está siendo explicado por el modelo. Un RMSE de 0.3739 significa que, en promedio, las predicciones del modelo se desvían de los valores reales (en la escala logarítmica) por aproximadamente 0.3739 unidades.Un MAE de 0.2798 significa que, en promedio, la magnitud del error entre la predicción y el valor real (en la escala logarítmica) es de 0.2798 unidades. 6.4 Visualización del Pronóstico El gráfico del “Pronóstico de Ventas Diarias con Prophet (Escala Original)” demuestra visualmente el desempeño del modelo en el conjunto de prueba. Se observa que la línea de pronóstico (roja discontinua) sigue de cerca los patrones estacionales y el nivel general de las ventas reales (línea azul). La capacidad del modelo para replicar los ciclos semanales es particularmente evidente. El MAE de 15,512.70 indica que, en promedio, la magnitud del error absoluto entre las ventas reales y las ventas pronosticadas es de aproximadamente 15,512.70. El RMSE de $25,141.19 es una métrica similar, pero que penaliza más fuertemente los errores grandes. Estos valores deben interpretarse en el contexto del rango de las ventas diarias de la empresa para determinar si son aceptables. ## ## Métricas de rendimiento en el conjunto de prueba (ESCALA ORIGINAL): ## RMSE (Raíz del Error Cuadrático Medio): 25141.19 ## MAE (Error Absoluto Medio): 15512.7 Los intervalos de confianza (área sombreada en rosa) encapsulan la mayoría de los valores reales, lo que sugiere una buena calibración de la incertidumbre del pronóstico. No obstante, se identifican algunas desviaciones, especialmente en picos muy altos o valles profundos, lo que sugiere áreas para una posible mejora del modelo. 6.5 Conclusiones El modelo Prophet ha demostrado ser una herramienta efectiva para pronosticar las ventas diarias, capturando con éxito las complejidades de la serie de tiempo. Las métricas de rendimiento proporcionan una base sólida para futuras evaluaciones y la toma de decisiones. Para mejorar aún más la precisión del pronóstico, se recomienda explorar la inclusión de días festivos (holidays) en el modelo. Eventos específicos como festivos nacionales o locales, promociones especiales, o eventos únicos que impacten las ventas, pueden ser incorporados para capturar la variabilidad no explicada por el modelo, como el pico de ventas observado a principios de diciembre que el modelo actual no logra capturar completamente. "],["referencias.html", "Referencias", " Referencias (Chen 2012) Chen, Daqing. 2012. “Online Retail II.” UCI Machine Learning Repository. "]]
